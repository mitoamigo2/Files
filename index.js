module.exports=function(e){var o={};function n(t){if(o[t])return o[t].exports;var s=o[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=e,n.c=o,n.d=function(e,o,t){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var s in e)n.d(t,s,function(o){return e[o]}.bind(null,s));return t},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=5)}([function(e,o){e.exports=require("electron")},function(e,o){e.exports=require("fs")},function(e,o){e.exports=require("path")},function(e,o,n){"use strict";n.r(o);var t=n(2),s=n.n(t),r=n(4),a=n(0);const i=!0;const c=s.a.join(__dirname,"..","renderer","index.html"),d=new class{constructor(e,o=!0){this._eventEmitter=new r.EventEmitter,this.allowRecreate=o,this.options=e,this.browserWindow=null,this._createInstance()}_createInstance(){a.app.on("ready",()=>{this._create()}),this.allowRecreate&&a.app.on("activate",()=>this._recreate())}_create(){this.browserWindow=new a.BrowserWindow({...this.options,webPreferences:{...this.options.webPreferences,webSecurity:i,nodeIntegration:!0,devTools:!process.env.SPECTRON}}),this.browserWindow.on("closed",()=>{this.browserWindow=null}),this._eventEmitter.emit("created")}_recreate(){null===this.browserWindow&&this._create()}onCreated(e){this._eventEmitter.once("created",()=>{e(this.browserWindow)})}created(){return new Promise(e=>{this._eventEmitter.once("created",()=>{e(this.browserWindow)})})}}({height:700,width:1240,frame:!1,transparent:!0});d.onCreated(e=>{e.loadFile(c)});o.default=d},function(e,o){e.exports=require("events")},function(e,o,n){"use strict";n.r(o);var t=n(0),s=n(3),r=n(1),a=n.n(r);n(2);let i,c=!1;const d=n(6),l=n(7),u=n(2).resolve,p=n(8),{autoUpdater:w}=n(9),f=n(10);let g=!1;t.app.disableHardwareAcceleration();const h=function(e,o){i&&c?i.webContents.send(e,o):setTimeout(()=>{h(e,o)},250)};f.transports.file.level="debug",w.logger=f;const y=w.checkForUpdatesAndNotify();y.then(e=>(h("updateReady",e),f.info("Update details: ",e))),y.catch(e=>{h("updateError",e),console.error("Error with autoUpdater: ",e)}),h("emoji",{info:"📣",warning:"⚠️",error:"⛔",yay:"🎉",trophy:"🏆",keyboard:"⌨️",check:"✅"}),global.__resources=void 0,global.__resources=require("path").join(__dirname,"..","resources"),void 0===__resources&&console.error("[Main-process]: Resources path is undefined");let m=null;const k=n(11);t.app.on("browser-window-focus",(e,o)=>{console.log("browser-window-focus",o.webContents.id),h("focus-app",!0)}),t.app.on("browser-window-blur",(e,o)=>{o.webContents.isDevToolsFocused()?console.log("Ignore this case"):(h("focus-app",!1),console.log("browser-window-blur",o.webContents.id))}),s.default.onCreated(e=>{i=e;const o={0:"§",1:"Escape",2:"1",3:"2",4:"3",5:"4",6:"5",7:"6",8:"7",9:"8",10:"9",11:"0",12:"Minus",13:"Equals",14:"Backspace",15:"Tab",16:"Q",17:"W",18:"E",19:"R",20:"T",21:"Y",22:"U",23:"I",24:"O",25:"P",26:"Open Bracket",27:"Close Bracket",28:"Enter",29:"Left Control",30:"A",31:"S",32:"S",33:"F",34:"G",35:"H",36:"J",37:"K",38:"L",39:"Semicolon",40:"Quote",41:"Back Quote",42:"Left Shift",43:"Back Slash",44:"Z",45:"X",46:"C",47:"V",48:"B",49:"N",50:"M",51:"Comma",52:"Period",53:"Slash",54:"Right Shift",56:"Left Alt",57:"Space",58:"Caps Lock",59:"F1",60:"F2",61:"F3",62:"F4",63:"F5",64:"F6",65:"F7",66:"F8",67:"F9",68:"F10",87:"F11",88:"F12",61010:"Insert",61011:"Delete",60999:"Home",61007:"End",61001:"Page Up",61009:"Page Down",3639:"Print Screen",3653:"Pause Break",3637:"Num /",55:"Num *",3612:"Num Enter",3655:"Num Home",3657:"Num Page Up",3663:"Num End",3665:"Num Page Down",57420:"Num Center 5",3677:"Context Menu",61008:"Down",61005:"Right",61003:"Left",61e3:"Up",57380:"Media Stop",57360:"Media Previous",57378:"Media Play",57369:"Media Next",57390:"Volume Down",57392:"Volume Up",57376:"Volume Mute",3613:"Right Control",3640:"Right Alt",3675:"Left Meta",3676:"Right Meta",57419:"←",57416:"↑",57424:"↓",57421:"→"};function s(e){let o=!1;console.log("javaversion running...");var t=n(12).spawn("java",["-version"]);t.on("error",(function(n){return console.log("ERROR",n),e(n,!!o||null)})),t.stderr.on("data",(function(n){n=n.toString().split("\n")[0],console.log(n);var t=!!new RegExp("java version").test(n)&&n.split(" ")[2].replace(/"/g,"");!!new RegExp("jdk").test(n)&&n.split(" ")[2].replace(/"/g,""),!!new RegExp("Corretto").test(n)&&n.split(" ")[2].replace(/"/g,"");return 0!=t?(o=!0,e(null,t)):e(null,!!o)}))}k.on("keydown",e=>{g||i.webContents.send("keydown",o[e.keycode])}),k.on("keyup",e=>{g||i.webContents.send("keyup",o[e.keycode])}),k.on("mousedown",e=>{g||i.webContents.send("mousedown",`${e.button}`)}),k.on("mouseup",e=>{g||i.webContents.send("mouseup",`${e.button}`)}),k.on("mousemove",e=>{g||i.webContents.send("mousemove","mousemove")}),k.start(),i.webContents.session.on("will-download",(e,o,n)=>{try{i.webContents.send("downloadingPack","Downloading pack now!");const e=o.getFilename().replace(".zip","");let n="";n="../mechakeys-sounds/soundpack/",o.setSavePath(u(n+o.getFilename())),i.webContents.send("downloadingPack",n),i.webContents.send("downloadingPack","resolved path: "+u(n)),o.on("updated",(n,t)=>{"interrupted"===t?(i.webContents.send("downloadingPack","interrupted"),console.log("Download is interrupted but can be resumed")):"progressing"===t&&(o.isPaused()?(i.webContents.send("downloadingPack","Download is paused"),console.log("Download is paused")):(i.webContents.send("downloadingPack",`Received bytes: ${o.getReceivedBytes()}`),i.webContents.send("downloadingPackProgress",{percent:o.getReceivedBytes()/o.getTotalBytes()*100,name:e}),console.log(`Received bytes: ${o.getReceivedBytes()}/${o.getTotalBytes()}`),console.log(`Percent: ${o.getReceivedBytes()/o.getTotalBytes()*100}`)))}),o.once("done",async(t,s)=>{"completed"===s?(i.webContents.send("downloadingPack","Download successfully."),i.webContents.send("downloadingPack",t),console.log("Download successfully"),await l(n+o.getFilename(),{dir:u(n)}),b("soundpack"),a.a.unlinkSync(n+e+".zip")):(i.webContents.send("sendToast",{text:`Failed to download ${e}. Are you online?`,style:"warning"}),i.webContents.send("resetPack",{type:"Soundpack"}),console.log(`Download failed: ${s}`))})}catch(e){i.webContents.send("downloadingPack",e),i.webContents.send("sendToast",{text:"Failed to download item. Are you online?",style:"error"})}}),t.app.on("window-all-closed",(function(){g=!0,"darwin"!==process.platform&&t.app.quit()})),t.ipcMain.on("close-window",async(e,o)=>{g=!0,"darwin"!==process.platform&&t.app.quit()}),t.ipcMain.on("minimize-window",async(o,n)=>{e.minimize()}),t.ipcMain.on("maximize-window",async(o,n)=>{e.isMaximized()?(console.log("IT IS MAXIMIZED so unmaximizing."),e.unmaximize()):(console.log("IT IS NOT MAXIMIZED so maximizing."),e.maximize())}),s((function(e,o){h("javaStatus",o)})),t.ipcMain.on("checkJava",async(e,o)=>{s((function(o,n){e.reply("javaStatus",n)}))}),t.ipcMain.on("tray-window",async(o,n)=>{e.hide();let s="";s=d?"./src/resources/win-icon.ico":`${t.app.getAppPath()}/dist/resources/win-icon.ico`,h("console",s),m=new t.Tray(s),m.setToolTip("MechaKeys"),m.on("click",(function(){console.log("SHOW TRAY CLICKED"),e.show(),m.destroy()}))})}),t.app.requestSingleInstanceLock()?(t.app.on("second-instance",(e,o,n)=>{i.show(),i&&(i.isMinimized()&&i.restore(),i.focus())}),t.app.on("ready",()=>{n(3)})):t.app.quit(),t.ipcMain.on("windowReady",(e,o)=>{c=!0}),t.ipcMain.on("getCookieSession",(e,o)=>{t.session.defaultSession.cookies.get({domain:"robolab.io",name:"state"}).then(o=>{e.reply("loadCookieSession",o[0].value)}).catch(e=>{console.log(e)})}),t.ipcMain.on("setCookieSession",(e,o)=>{const n={url:"http://robolab.io",name:"state",value:JSON.stringify(o)};t.session.defaultSession.cookies.set(n).then(()=>{},e=>{console.error(e)})});const b=e=>{let o="";o=u(`../mechakeys-sounds/${e}/`);const n=(e=>a.a.readdirSync(e,{withFileTypes:!0}).filter(e=>e.isDirectory()).map(e=>e.name))(o);i.webContents.send(`update_downloaded_${e}s`,n)};t.ipcMain.on("deleteDownload",(e,o)=>{let n="";n="../mechakeys-sounds/soundpack/",p.sync([n+o],{force:!0}),i.webContents.send("sendToast",{text:`${o} was deleted!`}),b("soundpack")}),t.ipcMain.on("downloadsoundpack",(e,o)=>{const n=o;i.webContents.downloadURL(`https://mechakeys.robolab.io/storage/${n}.zip`)});const{hashElement:v}=n(13),C={folders:{exclude:[".*","node_modules","test_coverage"]}};t.ipcMain.on("loadSoundpack",async(e,o)=>{console.log({event:"loadSoundpack executed",arg:o}),console.log({event:"current path:,",arg:t.app.getAppPath()}),console.log({event:"appData path:,",arg:t.app.getPath("appData")}),console.log({event:"process.resourcesPath:,",arg:process.resourcesPath}),console.log({event:"__resources:,",arg:__resources});const n=o.itemCode,s=(await v(u(`../mechakeys-sounds/soundpack/${n}/`),C)).hash,r=(await v(u(`../mechakeys-sounds/soundpack/${n}/`),C)).hash;if(console.log(`HashRemote= ${s} \n HashLocal= ${r}`),r===s){Date.now(),Date.now()}else console.log("Continue to use soundpack! A+");const c=y;function l(){const e=["132039LUvQpY","80nvntdS","send","webContents","soundpackFailedCheck","3566140AEztXZ","soundpack/","173388FiQLPl","297720LOLGMr","9shTkfO","11SfyPEz","1usqtoZ","Soundpack set!","info","1087597yGUNlw","Please re-download ","495578XozMoi","325390TiwwNS","Toast","48StgXpi","soundpack"];return(l=function(){return e})()}!function(e,o){const n=y,t=e();for(;;)try{if(283959===-parseInt(n(496))/1*(-parseInt(n(480))/2)+parseInt(n(494))/3*(parseInt(n(493))/4)+-parseInt(n(481))/5*(parseInt(n(483))/6)+-parseInt(n(499))/7+-parseInt(n(486))/8*(-parseInt(n(485))/9)+parseInt(n(490))/10+parseInt(n(495))/11*(-parseInt(n(492))/12))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(l);const w=c(487)+c(482),f={text:c(497),style:c(498)},g={text:c(500)+n+"!",style:"gottee"};function y(e,o){const n=l();return(y=function(e,o){return n[e-=480]})(e,o)}if(r==null){i[c(488)][c(487)](w,g);let e="";return e="../mechakeys-sounds/"+c(491),p.sync([e+n],{force:!0}),b(c(484)),void i[c(488)][c(487)](c(489),n)}if(i.webContents[c(487)](w,f),d){if(!a.a.existsSync(u(`../mechakeys-sounds/soundpack/${n}/`)))return void i.webContents.downloadURL(`https://mechakeys.robolab.io/storage/${n}.zip`)}else if(!a.a.existsSync(u(`../mechakeys-sounds/soundpack/${n}/`)))return void i.webContents.downloadURL(`https://mechakeys.robolab.io/storage/${n}.zip`);console.log("PATH FOUND CACHING"),b("soundpack"),function(e,o){var n={alpha:{down:[],up:[]},alt:{down:[],up:[]},space:{down:[],up:[]},enter:{down:[],up:[]}};for(var t in n)if(n.hasOwnProperty(t))for(var s in n[t])if(n[t].hasOwnProperty(s)){const r=t,c=s,d=u(`../mechakeys-sounds/soundpack/${e}/${r}/${c}`);a.a.readdir(d,(e,t)=>{e?(console.error(e),h("loadSoundpackError1",e)):(n[r][c]=t,o?o.reply("asynchronous-reply",{type:r,press:c,files:t}):i.webContents.send("asynchronous-reply",{type:r,press:c,files:t}))})}}(n,e)}),t.ipcMain.on("loadMousepack",(e,o)=>{const n=o;console.log("___ LOADING MOUSEPACK",n);var s={};if(d){if(!a.a.existsSync(`./src/renderer/assets/mousepack/${n}/`))return void h("soundpackNotFound")}else if(!a.a.existsSync(`${t.app.getAppPath()}/dist/renderer/_nuxt/src/renderer/assets/mousepack/${n}/`))return void h("soundpackNotFound");console.log("PATH FOUND CACHING");!function(){for(var o in s={left:{down:[],up:[]},right:{down:[],up:[]},middle:{down:[],up:[]},scroll:{down:[],up:[]}})if(s.hasOwnProperty(o))for(var r in s[o])if(s[o].hasOwnProperty(r)){const i=o,c=r;d?(console.log(`./src/renderer/assets/mousepack/${n}/${i}/${c}`),a.a.readdir(`./src/renderer/assets/mousepack/${n}/${i}/${c}`,(o,n)=>{o?(console.error(o),h("loadSoundpackError1",o)):(s[i][c]=n,e.reply("mousepack-loaded",{type:i,press:c,files:n}))})):a.a.readdir(`${t.app.getAppPath()}/dist/renderer/_nuxt/src/renderer/assets/mousepack/${n}/${i}/${c}`,(o,n)=>{o?(console.error(o),h("loadSoundpackError2",o)):(s[i][c]=n,e.reply("mousepack-loaded",{type:i,press:c,files:n}))})}}()})},function(e,o){e.exports=require("electron-is-dev")},function(e,o){e.exports=require("extract-zip")},function(e,o){e.exports=require("del")},function(e,o){e.exports=require("electron-updater")},function(e,o){e.exports=require("electron-log")},function(e,o){e.exports=require("iohook")},function(e,o){e.exports=require("child_process")},function(e,o){e.exports=require("folder-hash")}]);